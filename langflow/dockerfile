FROM langflowai/langflow-backend:latest

# Создаём директории
RUN mkdir -p /app/flows /app/langflow

# Копируем наш поток
COPY *.json /app/flows/

# Настройки окружения
ENV LANGFLOW_LOAD_FLOWS_PATH=/app/flows
ENV LANGFLOW_CONFIG_DIR=/app/langflow
ENV LANGFLOW_DATABASE_URL=sqlite:////app/langflow/langflow.db

EXPOSE 7860

CMD ["python", "-m", "langflow", "run", "--host", "0.0.0.0", "--port", "7860"]